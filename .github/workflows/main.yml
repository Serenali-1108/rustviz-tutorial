# This is a workflow to build and deploy the unravel project to Github Pages 
name: rust project
# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the master branch
  push:
    branches: [ master ]

jobs:
  build_and_test:
    runs-on: ubuntu-latest
    steps:
        - uses: actions/checkout@v2
        - uses: actions-rs/tolchain@v1
        with:
            tolchain: stable
        - uses: actions-rs/cargo@v1
            with:
                command: build
                args: --release --all-features
        - run: cargo install mdbook
        - run: mdbook build
        - name: rust project
          if: success()
          uses: crazy-max/ghaction-github-pages@v2
          with:
            target_branch: master
            build_dir: book
            keep_history: true
         env:
           GITHUB_TOKEN: ${{ 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}}
